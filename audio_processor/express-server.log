
> rest-express@1.0.0 dev:server
> NODE_ENV=development PORT=5001 tsx server/index.ts

⚠️ ELEVENLABS_API_KEY not found in environment variables
3:42:30 PM [express] serving on port 5001
3:42:30 PM [express] available at: https://undefined.undefined.repl.co
🦀 [Rust Audio] Service available: true
Browserslist: browsers data (caniuse-lite) is 10 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme
3:42:48 PM [express] GET /api/projects 200 in 1ms :: [{"name":"Sample STS Project","clientName":"Dem…
Upload request received
Request file: {
  fieldname: 'file',
  originalname: 'WhatsApp Video 2025-07-29 at 5.02.47 PM (1).mp4',
  encoding: '7bit',
  mimetype: 'video/mp4',
  destination: 'uploads/',
  filename: 'd6ddc8d56358092c46001c4489f84040',
  path: 'uploads/d6ddc8d56358092c46001c4489f84040',
  size: 17053025
}
Request headers: {
  host: 'localhost:5001',
  connection: 'keep-alive',
  'content-length': '17053245',
  'sec-ch-ua-platform': '"macOS"',
  'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.7204.168 Electron/37.2.5 Safari/537.36',
  'sec-ch-ua': '"Not)A;Brand";v="8", "Chromium";v="138"',
  'content-type': 'multipart/form-data; boundary=----WebKitFormBoundaryBN8OiXiKZMMs4PKY',
  'sec-ch-ua-mobile': '?0',
  accept: '*/*',
  origin: 'http://localhost:5001',
  'sec-fetch-site': 'same-origin',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://localhost:5001/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US'
}
File uploaded successfully: WhatsApp Video 2025-07-29 at 5.02.47 PM (1).mp4 (17053025 bytes)
Upload response: {
  success: true,
  filename: 'd6ddc8d56358092c46001c4489f84040',
  originalName: 'WhatsApp Video 2025-07-29 at 5.02.47 PM (1).mp4',
  size: 17053025,
  url: '/uploads/d6ddc8d56358092c46001c4489f84040',
  filePath: 'uploads/d6ddc8d56358092c46001c4489f84040',
  mimetype: 'video/mp4'
}
3:42:57 PM [express] POST /api/upload 200 in 55ms :: {"success":true,"filename":"d6ddc8d56358092c460…
3:42:57 PM [express] PUT /api/projects/1 200 in 0ms :: {"name":"Sample STS Project","clientName":"De…
3:42:57 PM [express] GET /api/projects 200 in 1ms :: [{"name":"Sample STS Project","clientName":"Dem…
3:42:58 PM [express] GET /api/projects/1 200 in 2ms :: {"name":"Sample STS Project","clientName":"De…
3:42:58 PM [express] GET /api/projects/1/tracks 200 in 1ms :: [{"id":1,"projectId":1,"trackType":"so…
3:42:58 PM [express] GET /api/voice-clones 304 in 0ms :: [{"name":"Rachel - Professional Female","de…
🎵 [Audio Extraction] Starting extraction...
🎵 [Audio Extraction] req.file: undefined
🎵 [Audio Extraction] req.body: { filePath: 'uploads/d6ddc8d56358092c46001c4489f84040' }
🎵 [Audio Extraction] Using provided path: uploads/d6ddc8d56358092c46001c4489f84040 → /Users/manishshinde/Rian-Audio-Editor2/uploads/d6ddc8d56358092c46001c4489f84040
🎵 [Audio Extraction] Input file exists: /Users/manishshinde/Rian-Audio-Editor2/uploads/d6ddc8d56358092c46001c4489f84040 (17053025 bytes)
🎵 [Audio Extraction] Output path: /Users/manishshinde/Rian-Audio-Editor2/uploads/d6ddc8d56358092c46001c4489f84040_audio_1754475178715.wav
🎵 [Audio Extraction] Running FFmpeg command: ffmpeg -y -i "/Users/manishshinde/Rian-Audio-Editor2/uploads/d6ddc8d56358092c46001c4489f84040" -vn -acodec pcm_s16le -ar 44100 -ac 2 -t 300 "/Users/manishshinde/Rian-Audio-Editor2/uploads/d6ddc8d56358092c46001c4489f84040_audio_1754475178715.wav"
🎵 [Audio Extraction] FFmpeg stdout: 
🎵 [Audio Extraction] FFmpeg stderr (normal): ffmpeg version 7.1.1 Copyright (c) 2000-2025 the FFmpeg developers
  built with Apple clang version 16.0.0 (clang-1600.0.26.6)
  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1.1_2 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags='-Wl,-ld_classic' --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon
  libavutil      59. 39.100 / 59. 39.100
  libavcodec     61. 19.101 / 61. 19.101
  libavformat    61.  7.100 / 61.  7.100
  libavdevice    61.  3.100 / 61.  3.100
  libavfilter    10.  4.100 / 10.  4.100
  libswscale      8.  3.100 /  8.  3.100
  libswresample   5.  3.100 /  5.  3.100
  libpostproc    58.  3.100 / 58.  3.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/Users/manishshinde/Rian-Audio-Editor2/uploads/d6ddc8d56358092c46001c4489f84040':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: mp42isom
  Duration: 00:01:32.25, start: 0.000000, bitrate: 1478 kb/s
  Stream #0:0[0x1](und): Video: h264 (Baseline) (avc1 / 0x31637661), yuv420p(tv, bt709, progressive), 848x480, 1413 kb/s, 25 fps, 25 tbr, 600 tbn (default)
      Metadata:
        vendor_id       : [0][0][0][0]
  Stream #0:1[0x2](und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 63 kb/s (default)
      Metadata:
        vendor_id       : [0][0][0][0]
Stream mapping:
  Stream #0:1 -> #0:0 (aac (native) -> pcm_s16le (native))
Press [q] to stop, [?] for help
Output #0, wav, to '/Users/manishshinde/Rian-Audio-Editor2/uploads/d6ddc8d56358092c46001c4489f84040_audio_1754475178715.wav':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: mp42isom
    ISFT            : Lavf61.7.100
  Stream #0:0(und): Audio: pcm_s16le ([1][0][0][0] / 0x0001), 44100 Hz, stereo, s16, 1411 kb/s (default)
      Metadata:
        vendor_id       : [0][0][0][0]
        encoder         : Lavc61.19.101 pcm_s16le
[out#0/wav @ 0x138e318f0] video:0KiB audio:15892KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.000479%
size=   15892KiB time=00:01:32.25 bitrate=1411.2kbits/s speed=1.22e+03x    

🎵 [Audio Extraction] Extracted audio file: /Users/manishshinde/Rian-Audio-Editor2/uploads/d6ddc8d56358092c46001c4489f84040_audio_1754475178715.wav (16273486 bytes)
🦀 [Audio Extraction] Using Rust processor for waveform generation...
🦀 [Rust Audio] Processing audio: /Users/manishshinde/Rian-Audio-Editor2/uploads/d6ddc8d56358092c46001c4489f84040_audio_1754475178715.wav
🦀 [Rust Audio] Processed successfully: 10595 peaks, 92.25287981859411s duration
🦀 [Audio Extraction] Rust processor generated 10595 peaks
✅ [Audio Extraction] Success! Generated 10595 waveform points
3:42:59 PM [express] POST /api/extract-audio 200 in 323ms :: {"success":true,"audioFile":"d6ddc8d563…
3:42:59 PM [express] PUT /api/tracks/1 200 in 4ms :: {"id":1,"projectId":1,"trackType":"source","tra…
3:42:59 PM [express] GET /api/projects/1/tracks 200 in 5ms :: [{"id":1,"projectId":1,"trackType":"so…
3:43:40 PM [express] GET /api/projects/1/tracks 200 in 2ms :: [{"id":1,"projectId":1,"trackType":"so…
3:46:45 PM [vite] hmr update /src/components/sts/enhanced-waveform.tsx, /src/index.css?v=gzRzS2ZJytTm9HLNaaxvS
3:46:54 PM [vite] hmr update /src/components/sts/enhanced-waveform.tsx, /src/index.css?v=gzRzS2ZJytTm9HLNaaxvS
3:47:12 PM [vite] hmr update /src/components/sts/enhanced-waveform.tsx, /src/index.css?v=gzRzS2ZJytTm9HLNaaxvS
3:47:21 PM [vite] hmr update /src/components/sts/enhanced-waveform.tsx, /src/index.css?v=gzRzS2ZJytTm9HLNaaxvS
3:47:43 PM [vite] hmr update /src/components/sts/enhanced-waveform.tsx, /src/index.css?v=gzRzS2ZJytTm9HLNaaxvS
3:47:53 PM [vite] hmr update /src/components/sts/enhanced-waveform.tsx, /src/index.css?v=gzRzS2ZJytTm9HLNaaxvS
3:47:58 PM [vite] hmr update /src/components/sts/enhanced-waveform.tsx, /src/index.css?v=gzRzS2ZJytTm9HLNaaxvS
3:48:04 PM [vite] hmr update /src/components/sts/enhanced-waveform.tsx, /src/index.css?v=gzRzS2ZJytTm9HLNaaxvS
3:48:36 PM [express] GET /api/voice-clones 304 in 2ms :: [{"name":"Rachel - Professional Female","de…
3:48:36 PM [express] GET /api/projects/1/tracks 200 in 3ms :: [{"id":1,"projectId":1,"trackType":"so…
3:48:36 PM [express] GET /api/projects/1 200 in 1ms :: {"name":"Sample STS Project","clientName":"De…
🎵 [Audio Extraction] Starting extraction...
🎵 [Audio Extraction] req.file: undefined
🎵 [Audio Extraction] req.body: { filePath: 'uploads/d6ddc8d56358092c46001c4489f84040' }
🎵 [Audio Extraction] Using provided path: uploads/d6ddc8d56358092c46001c4489f84040 → /Users/manishshinde/Rian-Audio-Editor2/uploads/d6ddc8d56358092c46001c4489f84040
🎵 [Audio Extraction] Input file exists: /Users/manishshinde/Rian-Audio-Editor2/uploads/d6ddc8d56358092c46001c4489f84040 (17053025 bytes)
🎵 [Audio Extraction] Output path: /Users/manishshinde/Rian-Audio-Editor2/uploads/d6ddc8d56358092c46001c4489f84040_audio_1754475516809.wav
🎵 [Audio Extraction] Running FFmpeg command: ffmpeg -y -i "/Users/manishshinde/Rian-Audio-Editor2/uploads/d6ddc8d56358092c46001c4489f84040" -vn -acodec pcm_s16le -ar 44100 -ac 2 -t 300 "/Users/manishshinde/Rian-Audio-Editor2/uploads/d6ddc8d56358092c46001c4489f84040_audio_1754475516809.wav"
🎵 [Audio Extraction] FFmpeg stdout: 
🎵 [Audio Extraction] FFmpeg stderr (normal): ffmpeg version 7.1.1 Copyright (c) 2000-2025 the FFmpeg developers
  built with Apple clang version 16.0.0 (clang-1600.0.26.6)
  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1.1_2 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags='-Wl,-ld_classic' --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon
  libavutil      59. 39.100 / 59. 39.100
  libavcodec     61. 19.101 / 61. 19.101
  libavformat    61.  7.100 / 61.  7.100
  libavdevice    61.  3.100 / 61.  3.100
  libavfilter    10.  4.100 / 10.  4.100
  libswscale      8.  3.100 /  8.  3.100
  libswresample   5.  3.100 /  5.  3.100
  libpostproc    58.  3.100 / 58.  3.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/Users/manishshinde/Rian-Audio-Editor2/uploads/d6ddc8d56358092c46001c4489f84040':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: mp42isom
  Duration: 00:01:32.25, start: 0.000000, bitrate: 1478 kb/s
  Stream #0:0[0x1](und): Video: h264 (Baseline) (avc1 / 0x31637661), yuv420p(tv, bt709, progressive), 848x480, 1413 kb/s, 25 fps, 25 tbr, 600 tbn (default)
      Metadata:
        vendor_id       : [0][0][0][0]
  Stream #0:1[0x2](und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 63 kb/s (default)
      Metadata:
        vendor_id       : [0][0][0][0]
Stream mapping:
  Stream #0:1 -> #0:0 (aac (native) -> pcm_s16le (native))
Press [q] to stop, [?] for help
Output #0, wav, to '/Users/manishshinde/Rian-Audio-Editor2/uploads/d6ddc8d56358092c46001c4489f84040_audio_1754475516809.wav':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: mp42isom
    ISFT            : Lavf61.7.100
  Stream #0:0(und): Audio: pcm_s16le ([1][0][0][0] / 0x0001), 44100 Hz, stereo, s16, 1411 kb/s (default)
      Metadata:
        vendor_id       : [0][0][0][0]
        encoder         : Lavc61.19.101 pcm_s16le
[out#0/wav @ 0x142810780] video:0KiB audio:15892KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.000479%
size=   15892KiB time=00:01:32.25 bitrate=1411.2kbits/s speed=1.29e+03x    

🎵 [Audio Extraction] Extracted audio file: /Users/manishshinde/Rian-Audio-Editor2/uploads/d6ddc8d56358092c46001c4489f84040_audio_1754475516809.wav (16273486 bytes)
🦀 [Audio Extraction] Using Rust processor for waveform generation...
🦀 [Rust Audio] Processing audio: /Users/manishshinde/Rian-Audio-Editor2/uploads/d6ddc8d56358092c46001c4489f84040_audio_1754475516809.wav
🦀 [Rust Audio] Processed successfully: 10595 peaks, 92.25287981859411s duration
🦀 [Audio Extraction] Rust processor generated 10595 peaks
✅ [Audio Extraction] Success! Generated 10595 waveform points
3:48:37 PM [express] POST /api/extract-audio 200 in 497ms :: {"success":true,"audioFile":"d6ddc8d563…
3:48:37 PM [express] PUT /api/tracks/1 200 in 1ms :: {"id":1,"projectId":1,"trackType":"source","tra…
3:48:37 PM [express] GET /api/projects/1/tracks 200 in 2ms :: [{"id":1,"projectId":1,"trackType":"so…
3:51:21 PM [vite] hmr update /src/components/sts/video-player.tsx, /src/index.css?v=gzRzS2ZJytTm9HLNaaxvS
3:51:36 PM [vite] hmr update /src/components/sts/video-player.tsx, /src/index.css?v=gzRzS2ZJytTm9HLNaaxvS
3:51:36 PM [vite] Internal server error: /Users/manishshinde/Rian-Audio-Editor2/client/src/components/sts/video-player.tsx: Missing initializer in const declaration. (12:71)

  10 | }
  11 |
> 12 | const VideoPlayer = React.forwardRef<HTMLVideoElement, VideoPlayerProps>(
     |                                                                        ^
  13 |   ({ videoFile, onAudioExtracted }, ref) => {
  14 |   // Use global playhead state
  15 |   const [playheadState, playheadActions] = useGlobalPlayhead();
  Plugin: vite:react-babel
  File: /Users/manishshinde/Rian-Audio-Editor2/client/src/components/sts/video-player.tsx:12:71
  10 |  }
  11 |  
  12 |  const VideoPlayer = React.forwardRef<HTMLVideoElement, VideoPlayerProps>(
     |                                                                         ^
  13 |    ({ videoFile, onAudioExtracted }, ref) => {
  14 |    // Use global playhead state
      at toParseError (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/parser/src/parse-error.ts:95:45)
      at raise (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/parser/src/tokenizer/index.ts:1497:19)
      at parseVar (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/parser/src/parser/statement.ts:1581:16)
      at parseVarStatement (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/parser/src/parser/statement.ts:1227:10)
      at parseVarStatement (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/parser/src/plugins/typescript/index.ts:3007:33)
      at parseStatementContent (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/parser/src/parser/statement.ts:566:21)
      at parseStatementContent (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/parser/src/plugins/typescript/index.ts:3056:20)
      at parseStatementLike (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/parser/src/parser/statement.ts:437:17)
      at parseModuleItem (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/parser/src/parser/statement.ts:374:17)
      at parseBlockOrModuleBlockBody (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/parser/src/parser/statement.ts:1419:16)
      at parseBlockBody (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/parser/src/parser/statement.ts:1393:10)
      at parseProgram (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/parser/src/parser/statement.ts:225:10)
      at parseTopLevel (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at parse (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/parser/src/parser/index.ts:90:10)
      at parse (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/parser/src/plugins/typescript/index.ts:4192:20)
      at parse (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/parser/src/index.ts:92:38)
      at parser (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/core/src/parser/index.ts:28:19)
      at parser.next (<anonymous>)
      at normalizeFile (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/core/src/transformation/normalize-file.ts:50:24)
      at normalizeFile.next (<anonymous>)
      at run (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/core/src/transformation/index.ts:40:36)
      at run.next (<anonymous>)
      at transform (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/core/src/transform.ts:29:20)
      at transform.next (<anonymous>)
      at step (/Users/manishshinde/Rian-Audio-Editor2/node_modules/gensync/index.js:261:32)
      at /Users/manishshinde/Rian-Audio-Editor2/node_modules/gensync/index.js:273:13
      at async.call.result.err.err (/Users/manishshinde/Rian-Audio-Editor2/node_modules/gensync/index.js:223:11)
      at /Users/manishshinde/Rian-Audio-Editor2/node_modules/gensync/index.js:189:28
      at <anonymous> (/Users/manishshinde/Rian-Audio-Editor2/node_modules/@babel/core/src/gensync-utils/async.ts:90:7)
      at /Users/manishshinde/Rian-Audio-Editor2/node_modules/gensync/index.js:113:33
      at step (/Users/manishshinde/Rian-Audio-Editor2/node_modules/gensync/index.js:287:14)
      at /Users/manishshinde/Rian-Audio-Editor2/node_modules/gensync/index.js:273:13
      at async.call.result.err.err (/Users/manishshinde/Rian-Audio-Editor2/node_modules/gensync/index.js:223:11)
